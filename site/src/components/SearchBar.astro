---
interface Props {
  placeholder?: string;
  id?: string;
}

const { placeholder = 'Search skills...', id = 'search' } = Astro.props;
---

<div class="search-container">
  <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <circle cx="11" cy="11" r="8"/>
    <path d="M21 21l-4.35-4.35"/>
  </svg>
  <input 
    type="search" 
    id={id}
    class="search-input" 
    placeholder={placeholder}
    autocomplete="off"
  />
  <kbd class="search-shortcut">/</kbd>
</div>

<style>
  .search-container {
    position: relative;
    max-width: 400px;
    width: 100%;
  }

  .search-icon {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-text-secondary);
    pointer-events: none;
  }

  .search-input {
    padding-left: 3rem;
    padding-right: 3rem;
  }

  .search-shortcut {
    position: absolute;
    right: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    background-color: var(--color-bg-tertiary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-sm);
    padding: 0.125rem 0.5rem;
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--color-text-secondary);
    pointer-events: none;
  }
</style>

<script>
  // Focus search on "/" key press
  document.addEventListener('keydown', (e) => {
    if (e.key === '/' && !['INPUT', 'TEXTAREA'].includes((e.target as HTMLElement)?.tagName)) {
      e.preventDefault();
      document.getElementById('search')?.focus();
    }
  });
</script>
