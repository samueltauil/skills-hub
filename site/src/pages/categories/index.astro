---
import Layout from '../../layouts/Layout.astro';
import CategoryCard from '../../components/CategoryCard.astro';

import skillsData from '../../data/skills.json';

// Define category metadata (icons, names, descriptions)
const categoryMeta: Record<string, { name: string; icon: string; description: string }> = {
  'git-version-control': { name: 'Git & Version Control', icon: 'ðŸ”€', description: 'Skills for Git operations, branching, merging, and version control workflows' },
  'code-quality': { name: 'Code Quality & Refactoring', icon: 'âœ¨', description: 'Skills for improving code quality, refactoring, and following best practices' },
  'documentation': { name: 'Documentation', icon: 'ðŸ“', description: 'Skills for generating and maintaining documentation' },
  'diagrams': { name: 'Diagrams & Visualization', icon: 'ðŸ“Š', description: 'Skills for creating diagrams, flowcharts, and visual representations' },
  'testing': { name: 'Testing', icon: 'ðŸ§ª', description: 'Skills for writing and managing tests' },
  'api-backend': { name: 'API & Backend', icon: 'ðŸ”Œ', description: 'Skills for API development and backend services' },
  'frontend-ui': { name: 'Frontend & UI', icon: 'ðŸŽ¨', description: 'Skills for frontend development and UI components' },
  'devops-cicd': { name: 'DevOps & CI/CD', icon: 'ðŸš€', description: 'Skills for deployment, CI/CD pipelines, and DevOps workflows' },
  'security': { name: 'Security', icon: 'ðŸ”’', description: 'Skills for security analysis and best practices' },
  'data-analytics': { name: 'Data & Analytics', icon: 'ðŸ“ˆ', description: 'Skills for data processing and analytics' },
  'office-documents': { name: 'Office Documents', icon: 'ðŸ“„', description: 'Skills for working with office documents and formats' },
  'mcp-development': { name: 'MCP Development', icon: 'ðŸ”§', description: 'Skills for Model Context Protocol development' },
  'general': { name: 'General', icon: 'ðŸ“¦', description: 'General-purpose development skills' }
};

// Get categories with skill counts
const categoryIds = [...new Set(skillsData.skills.map(s => s.category || 'general'))].sort();
const categories = categoryIds.map(id => ({
  id,
  name: categoryMeta[id]?.name || id,
  description: categoryMeta[id]?.description || `Skills in the ${id} category`,
  icon: categoryMeta[id]?.icon || 'ðŸ“',
  count: skillsData.skills.filter(s => (s.category || 'general') === id).length
}));
---

<Layout title="Categories" description="Browse skills by category">
  <section class="page-header">
    <div class="container">
      <h1>Categories</h1>
      <p class="text-secondary">Browse {categories.length} skill categories</p>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <div class="grid grid-2">
        {categories.map(category => (
          <CategoryCard 
            id={category.id}
            name={category.name}
            description={category.description}
            icon={category.icon}
            count={category.count}
          />
        ))}
      </div>
    </div>
  </section>
</Layout>

<style>
  .page-header {
    padding: 3rem 0 2rem;
    background-color: var(--color-bg-secondary);
    border-bottom: 1px solid var(--color-border);
  }

  .page-header h1 {
    font-size: 2rem;
    margin-bottom: 0.5rem;
  }
</style>
